{% extends "billy/base.html" %}
{% load humanize %}
{% load staticfiles %}
{% load billy_utiltags %}

{% block title %}Data Quality{% endblock %}

{% block script %}
    <link rel="stylesheet" type="text/css" href="{% static 'select2-2.0/select2.css' %}"/>
    <script type="text/javascript" src="{% static 'select2-2.0/select2.min.js' %}"></script>
    <script type="text/javascript">

    var uncat_subjects = [
{% for sub in uncat_subjects %}
        "{{sub.0}}",{% endfor %}
    ];

        $(document).ready(function() {
            for ( var i = 0; i < (10 < uncat_subjects.length) ? 10 : uncat_subjects.length; ++i ) {
                var obj = uncat_subjects[i];
                $("#target").append("<tr><td>" + obj + "</td><td></td></tr>")
                // .select2();
            }
        });
    </script>
{% endblock %}

{% block content %}
<h2>Subjects needing sorting</h2>

<form action = '{% url admin_subjects_commit metadata.abbreviation %}' method = 'POST' >
<table class="table table-striped table-bordered table-condensed" id = 'target'>
    <tr>
        <th>"Foreign" subject</th>
        <th>Billy subject</th>
    </tr>
</table>
<input type = 'submit' class = 'btn btn-primary' name = 'sub' value = 'Make it so' />
</form>

<h2>Existing subjects</h2>

{% comment %}

<table class="table table-striped table-bordered table-condensed">
    <tr>
        <th>"Foreign" subject</th>
        <th>Billy subject</th>
        <th>Beleted</th>
    </tr>
{% for subject in subjects %}
    <tr>
        <td>{{ subject.remote }}</td>
        <td>
{% for n in subject.normal %}
<span class="label label-info">{{ n }}</span>
{% endfor %}
        </td>
        <td><a href = '{% url admin_subjects_remove metadata.abbreviation subject|key:"_id" %}' >remove</a></td>
    </tr>
{% endfor %}
</table>

{% endcomment %}
{% endblock %}
