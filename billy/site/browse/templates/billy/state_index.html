{% extends "billy/base.html" %}
{% load humanize %}

{% block content %}
<h2>{{ metadata.name }}</h2>

<div style="float: left; padding-right: 3em;" class="metadata">
    <h4 width="100%">Metadata</h4>
    <dl>
    {% for k, v in metadata.items %}
    {% if k != "terms" and k != "session_details" %}
    <dt>{{k}}</dt><dd>{{v}}</dd>
    {% endif %}
    {% endfor %}
    </dl>

    <h4 width="100%">Terms</h4>
    <table>
        <tr><th>Term</th><th>Start Year</th><th>End Year</th><th>Sessions</th></tr>
        {% for term in metadata.terms %}
        <tr><td>{{term.name}}</td><td>{{term.start_year}}</td><td>{{term.end_year}}</td>
            <td><ul>{{term.sessions|unordered_list}}</ul></td>
        </tr>
        {% endfor %}
    </table>
</div>

<div style="float: left; padding-right: 3em;" class="bills">
    <h4 width="100%">Bills<a href="random_bill/">(random bill)</a></h4>
  <dl>
      <dt>Upper Chamber:</dt><dd>{{report.bills.upper_bill_count}}</dd>
      <dt>Lower Chamber:</dt><dd>{{report.bills.lower_bill_count}}</dd>
      <dt>Total Bills:</dt><dd>{{report.bills.bill_count}}</dd>
      <dt>Bills without actions:</dt><dd>{{report.bills.actionless|length}}</dd>
      <dt>Bills without sponsors:</dt><dd>{{report.bills.sponsorless|length}}</dd>
      <dt>Bills without versions:</dt><dd>{{report.bills.versionless|length}}</dd>
      <dt>Bills without sources:</dt><dd>{{report.bills.sourceless|length}}</dd>
      <dt>Versions:</dt><dd>{{versions}}</dd>
      <dt>Updated Today:</dt><dd>{{report.bills.updated_today}}%</dd>
      <dt>Updated This Month:</dt><dd>{{report.bills.updated_this_month}}%</dd>
      <dt>Updated This Year:</dt><dd>{{report.bills.updated_this_year}}%</dd>
  </dl>
  <h4 width="100%">Bill Types</h4>
  <table>
      <tr><th>Type</th><th>#</th></tr>
      {% for name, num in report.bills.bills_types.iteritems %}
      <tr><td>{{name}}</td><td>{{num}}</td></tr>
      {% endfor %}
  </table>
  <h4 width="100%">Action Types</h4>
  <table>
      <tr><th>Type</th><th>#</th></tr>
      {% for name, num in report.bills.actions_per_type.iteritems %}
      <tr><td>{{name}}</td><td>{{num}}</td></tr>
      {% endfor %}
  </table>
  <h4 width="100%">Actors</h4>
  <table>
      <tr><th>Type</th><th>#</th></tr>
      {% for name, num in report.bills.actions_per_actor.iteritems %}
      <tr><td>{{name}}</td><td>{{num}}</td></tr>
      {% endfor %}
  </table>
  <h4 width="100%">Actors</h4>
  <table>
      <tr><th>Type</th><th>#</th></tr>
      {% for name, num in report.bills.actions_per_month.iteritems %}
      <tr><td>{{name}}</td><td>{{num}}</td></tr>
      {% endfor %}
  </table>

</div>

<div style="float:left;" class="legislators">
    <h4 width="100%"><a href="legislators/">Legislators</a></h4>
    <dl>
      <dt>Upper Chamber:</dt><dd>{{upper_leg_count}}</dd>
      <dt>Lower Chamber:</dt><dd>{{lower_leg_count}}</dd>
      <dt>Total Active Legislators:</dt><dd>{{leg_count}}</dd>
      <dt>Inactive Legislators:</dt><dd>{{inactive_leg_count}}</dd>
      <dt>Legislators without sources:</dt><dd>{{ns_leg_count}}</dd>
      <dt>Legislators without PVS id:</dt><dd>{{missing_pvs}}</dd>
      <dt>Legislators without TransparencyData id:</dt><dd>{{missing_tdata}}</dd>
    </dl>

    <h4 width="100%"><a href="committees/">Committees</a></h4>
    <dl>
      <dt>Upper Committees:</dt><dd>{{upper_com_count}}</dd>
      <dt>Lower Committees:</dt><dd>{{lower_com_count}}</dd>
      <dt>Joint Committees:</dt><dd>{{joint_com_count}}</dd>
      <dt>Total Committees:</dt><dd>{{com_count}}</dd>
      <dt>Committees without sources:</dt><dd>{{ns_com_count}}</dd>
    </dl>
</div>

{% endblock %}
